<!DOCTYPE html>
<html lang="en" class="scroll-smooth dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MerchantHaus – ISO Solutions for U.S. Retail</title>
  <meta name="theme-color" content="#1c1c1c">

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@700&family=Lexend:wght@100;400&family=Montserrat:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: { 
            sans: ['Lexend', 'ui-sans-serif', 'system-ui'],
            ubuntu: ['Ubuntu', 'sans-serif'] 
          },
          colors: {
            brand: { 600:'#dc2743', 700:'#c21b35', 400:'#ef3c5b' },
            'brand-green': '#6dffca'
          },
          keyframes: {
            floaty: { '0%,100%': { transform: 'translateY(0)' }, '50%': { transform: 'translateY(-6px)' } },
            scroll: { '0%': { transform: 'translateX(0)' }, '100%': { transform: 'translateX(-100%)' } },
            fadeIn: { '0%': { opacity: '0' }, '100%': { opacity: '1' } },
            kenBurns: {
              '0%': { transform: 'scale(1) rotate(0deg)', backgroundPosition: 'center' },
              '100%': { transform: 'scale(1.1) rotate(1deg)', backgroundPosition: 'top left' }
            }
          },
          animation: {  
            floaty: 'floaty 6s ease-in-out infinite',
            scroll: 'scroll 40s linear infinite',
            fadeIn: 'fadeIn 1.5s ease-in-out forwards',
            kenBurns: 'kenBurns 20s ease-in-out infinite alternate'
          }
        }
      }
    }
  </script>
  
  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <!-- Custom Styles -->
  <style>
    :root { color-scheme: light dark; }
    body { font-family: 'Lexend', ui-sans-serif, system-ui; }

    .header-glass {
      background-color: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    .dark .header-glass {
      background-color: rgba(28, 28, 28, 0.8);
    }
    
    .field:focus { outline: none; box-shadow: 0 0 0 3px rgba(239,60,91,.35); }
    .cursor {
      display: inline-block;
      width: 3px;
      height: 1em;
      background-color: #dc2743;
      animation: blink-caret .75s step-end infinite;
      vertical-align: bottom;
    }
    @keyframes blink-caret {
      from, to { background-color: transparent; }
      50% { background-color: #dc2743; }
    }
    .loader {
        width: 16px;
        height: 16px;
        border: 2px solid #FFF;
        border-bottom-color: transparent;
        border-radius: 50%;
        display: inline-block;
        box-sizing: border-box;
        animation: rotation 1s linear infinite;
        vertical-align: middle;
        margin-right: 8px;
    }
    @keyframes rotation {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
    
    .feature-display {
        display: flex; align-items: center; justify-content: center;
        min-width: 150px; height: 38px; padding: 0 16px; border-radius: 9999px;
        background-color: #F3F4F6;
        color: #111827;
        font-size: 0.875rem; font-weight: 500; transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
        opacity: 0; transform: translateX(-50%) translateY(10px); position: absolute; left: 50%; white-space: nowrap;
    }
    .dark .feature-display {  
        background-color: #1f2937;
        color: #f9fafb;
    }
    .feature-display.active { opacity: 1; transform: translateX(-50%) translateY(0); }
    .feature-display.exiting { opacity: 0; transform: translateX(-50%) translateY(-10px); }
    
    .service-cell {
        opacity: 0;
        transition: opacity 0.5s ease-in-out;
    }
    .service-cell.is-visible {
        opacity: 1;
    }
    .service-cell h3, .service-cell p {
        opacity: 0;
        transform: translateY(10px);
        transition: opacity 0.4s ease-out, transform 0.4s ease-out;
    }
    .service-cell.is-visible h3 {
        opacity: 1;
        transform: translateY(0);
        transition-delay: 0.2s;
    }
    .service-cell.is-visible p {
        opacity: 1;
        transform: translateY(0);
        transition-delay: 0.3s;
    }

    .hero-bg-container::before {
        content: '';
        position: absolute;
        inset: 0;
        background-image: url('hero.jpg');
        background-size: 100%;
        background-position: center;
        background-repeat: no-repeat;
        animation: kenBurns 20s ease-in-out infinite alternate;
        z-index: -20;
    }

    /* Wordmark + accent animation */
    .grad-text, .grad-text-static {
      display:inline-block;
      background: linear-gradient(90deg,#c21b35,#ef3c5b,#c21b35);
      -webkit-background-clip:text; background-clip:text;
      -webkit-text-fill-color:transparent; color:transparent;
    }

    /* Prefer dark grey globally */
    .dark, .dark body { background-color: #1c1c1c !important; color: #f5f5f5 !important; }
    /* Common slate utilities coerced to dark grey */
    .dark .bg-slate-950, .dark .bg-slate-900, .dark .bg-slate-800 { background-color:#1c1c1c !important; }
    .dark .border-slate-800, .dark .border-slate-700 { border-color:#2a2a2a !important; }
    .dark .text-slate-400, .dark .text-slate-300, .dark .text-slate-100 { color:#c8c8c8 !important; }

    /* Footer Styling */
    footer {
        position: relative;
        background-image: url('assets/email.jpg');
        background-size: cover;
        background-position: center;
        color: white;
    }

    footer::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(0, 0, 0, 0.6);
        z-index: 1;
    }

    footer > div {
        position: relative;
        z-index: 2;
    }

    footer .text-gray-600, footer .dark\:text-slate-300, footer p {
        color: #d1d5db !important;
    }
    footer .text-gray-500 {
        color: #9ca3af !important;
    }
    footer a {
        color: #f9fafb !important;
    }
    footer a:hover {
        text-decoration: underline;
    }
    footer h3 {
        color: #f9fafb !important;
    }
    footer .border-slate-200, footer .dark\:border-slate-800 {
        border-color: rgba(255, 255, 255, 0.2) !important;
    }
    .panel-overlay, .panel-container { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
  </style>

  <!-- Favicons -->
  <link rel="apple-touch-icon" sizes="180x180" href="shield/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="shield/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="shield/favicon-16x16.png">
  <link rel="manifest" href="shield/site.webmanifest">

</head>

<body class="bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100">
  
  <div class="sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-4">
      <header class="header-glass border border-slate-200/70 dark:border-slate-800 rounded-xl">
        <div class="relative max-w-7xl mx-auto px-4 py-4 flex items-center justify-between">
          <a href="#" class="flex items-center gap-3 group">
            <img src="shield/shield.png" alt="MerchantHaus Logo" class="h-10 w-10">
            <div>
              <div id="logo-container" class="text-xl md:text-2xl font-ubuntu font-bold tracking-wide grad-text">MerchantHaus</div>
              <p id="animated-tagline" class="text-xs text-slate-500 dark:text-slate-400 h-4"></p>
            </div>
          </a>
          <div class="flex items-center gap-2">
            <a href="#" class="js-cta bg-transparent hover:bg-brand-600 text-brand-600 hover:text-white border border-brand-600 px-4 py-2 rounded-full text-sm font-semibold transition-colors duration-300">Get Started</a>
            <a href="#" class="hidden sm:block bg-transparent hover:bg-brand-green text-brand-green hover:text-slate-800 border border-brand-green px-4 py-2 rounded-lg text-sm font-semibold transition-colors duration-300">Login</a>
            <button id="open-menu-btn" class="p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800" aria-label="Open menu"><i data-lucide="menu" class="h-5 w-5"></i></button>
          </div>
           <!-- Pop-out Menu -->
           <div id="popout-menu" class="absolute top-full right-4 mt-2 w-72 rounded-xl bg-white dark:bg-[#1c1c1c] shadow-2xl border border-brand-green p-4 z-[51] hidden opacity-0 transition-opacity duration-300">
            <nav class="flex flex-col space-y-1 text-base font-medium">
                <a href="#payments" data-close class="px-4 py-2 rounded-lg hover:bg-brand-600 hover:text-white transition-colors">Payment Services</a>
                <a href="#integrations" data-close class="px-4 py-2 rounded-lg hover:bg-brand-600 hover:text-white transition-colors">Integrations</a>
                <a href="#checklist" data-close class="px-4 py-2 rounded-lg hover:bg-brand-600 hover:text-white transition-colors">Setup Checklist</a>
                <a href="#" data-close class="js-support px-4 py-2 rounded-lg hover:bg-brand-600 hover:text-white transition-colors">Contact Support</a>
                <a href="#" data-close class="sm:hidden block px-4 py-2 rounded-lg hover:bg-brand-600 hover:text-white transition-colors mt-2 pt-2 border-t border-slate-200 dark:border-slate-800">Login</a>
            </nav>
            <div class="mt-4 pt-4 border-t border-slate-200 dark:border-slate-800">
                <p class="text-xs text-center text-slate-500 dark:text-slate-400">
                    Questions? Call <a href="tel:15056006042" class="text-brand-600 dark:text-brand-400 hover:underline">1-505-600-6042</a> or email us at <a href="mailto:support@merchanthaus.io" class="text-brand-600 dark:text-brand-400 hover:underline">support@merchanthaus.io</a>
                </p>
            </div>
          </div>
        </div>
      </header>
    </div>
  </div>


  <!-- Hero -->
  <div class="relative">
    <section class="relative overflow-hidden animate-fadeIn hero-bg-container">
        <div class="absolute inset-0 bg-black/50 -z-10"></div>

      <div class="max-w-7xl mx-auto px-4 pt-16 md:pt-24 pb-28">
          <div class="grid md:grid-cols-2 gap-10 items-center">
              <div class="space-y-6 text-center md:text-left">
                  <h1 class="text-3xl sm:text-4xl tracking-tight leading-tight text-white">
                    <span class="uppercase font-ubuntu">PAYMENTS EVERYWHERE</span>
                    <span id="animated-headline-sub" class="grad-text-static text-2xl sm:text-3xl font-lexend block sm:inline-block mt-2 sm:mt-0 h-10 sm:h-auto">
                      Built for Speed, Security, and Scale.
                    </span>
                  </h1>
                  <p class="text-lg text-gray-200 dark:text-slate-300 font-lexend" style="font-weight:100">
                    Effortlessly set up your business profile and start taking payments in minutes—cards, ACH, and secure pay links—online, in-store, or on the go. 
                    Enjoy lower costs, fast onboarding, real-time reporting, and tools to reduce fraud and chargebacks.
                  </p>
              </div>
              <div class="relative p-4">
                  <div class="w-full space-y-4 relative z-10">
                      <div class="relative">
                          <input type="text" id="faq-question" placeholder="Ask about pricing, features..." class="field w-full p-4 pr-12 text-lg rounded-full bg-white/20 dark:bg-slate-900/30 border border-slate-300/50 dark:border-slate-700/50 text-white placeholder-slate-300 focus:ring-2 focus:ring-brand-400 focus:border-transparent transition-all">
                          <button id="ask-faq" class="absolute top-1/2 right-2 -translate-y-1/2 p-2 rounded-full bg-brand-600 text-white hover:bg-brand-700 transition-colors">
                              <i data-lucide="arrow-up" class="h-5 w-5"></i>
                          </button>
                      </div>
                      <div id="hero-actions" class="flex flex-wrap justify-center items-center gap-3">
                          <button class="js-cta bg-transparent hover:bg-brand-600 text-brand-600 hover:text-white border border-brand-600 px-4 py-2 rounded-full text-sm font-semibold transition-colors duration-300">Get Started</button>
                          <button class="bg-slate-100/20 dark:bg-slate-800/30 text-white px-4 py-2 rounded-full text-sm font-medium hover:bg-slate-200/30 dark:hover:bg-slate-700/40 transition-colors">Chargeback Help</button>
                          <button class="js-support bg-slate-100/20 dark:bg-slate-800/30 text-white px-4 py-2 rounded-full text-sm font-medium hover:bg-slate-200/30 dark:hover:bg-slate-700/40 transition-colors">Contact Support</button>
                      </div>
                      <div id="faq-answer" class="mt-6 p-4 text-left rounded-lg bg-white/90 dark:bg-slate-900/90 border border-slate-200 dark:border-slate-800 hidden text-slate-800 dark:text-slate-200"></div>
                  </div>
              </div>
          </div>
      </div>
    </section>

    <div class="absolute bottom-0 left-1/2 -translate-x-1/2 translate-y-1/2 z-10 w-full max-w-5xl px-4">
        <div class="bg-white dark:bg-[#1c1c1c] text-slate-800 dark:text-slate-200 px-8 py-4 rounded-xl border-2 border-brand-600 shadow-lg text-center">
            <h2 class="text-3xl font-ubuntu font-bold">Payment Services Built for You</h2>
        </div>
    </div>
  </div>

  <!-- Payment Services -->
  <section id="payments" class="pt-28 pb-12" style="background-color: #6dffca;">
    <div class="max-w-5xl mx-auto px-4 text-right">
      <p class="text-2xl sm:text-3xl font-lexend mb-12" style="color: #524848;">Your complete toolkit for accepting payments and managing your business.</p>
    </div>
    <div class="relative w-full overflow-hidden group [mask-image:_linear_gradient(to_right,transparent_0,_black_128px,_black_calc(100%-128px),transparent_100%)]">
        <div class="flex animate-scroll group-hover:[animation-play-state:paused]">
            <div class="flex-shrink-0 flex items-center space-x-8" id="services-container-1"></div>
            <div class="flex-shrink-0 flex items-center space-x-8" id="services-container-2" aria-hidden="true"></div>
        </div>
    </div>
  </section>

  <!-- Integrations Section -->
  <section id="integrations" class="py-8 md:py-12">
    <div class="max-w-5xl mx-auto px-4 text-center">
      <h2 class="text-4xl font-bold mb-4 animate-on-scroll font-ubuntu">Integrate with Your Favorite Tools</h2>
      <p class="text-lg text-gray-600 dark:text-slate-300 mb-12">Connect MerchantHaus with the platforms you already use.</p>
      <div class="flex justify-center items-center gap-8 md:gap-16">
        <a href="#" class="block hover:scale-105 transition-transform duration-300">
          <img src="shopifylight.png" alt="Shopify Logo" class="h-12 md:h-14 block dark:hidden">
          <img src="shopifydark.png" alt="Shopify Logo" class="h-12 md:h-14 hidden dark:block">
        </a>
        <a href="#" class="block hover:scale-105 transition-transform duration-300">
          <img src="gohighlevellight.png" alt="GoHighLevel Logo" class="h-12 md:h-14 block dark:hidden">
          <img src="gohighleveldark.png" alt="GoHighLevel Logo" class="h-12 md:h-14 hidden dark:block">
        </a>
      </div>
    </div>
  </section>
    
  <!-- Setup Checklist -->
  <div class="relative">
    <section id="checklist" class="pt-28 pb-16 bg-slate-50 dark:bg-slate-900/40 border-y border-slate-200/70 dark:border-slate-800">
      <div class="max-w-7xl mx-auto px-4 text-center">
        <p class="mt-4 max-w-3xl mx-auto text-slate-600 dark:text-slate-300">
          Here’s everything we’ll ask for during setup—business details, security info, documentation. We’ll guide you step‑by‑step.
        </p>
        <div class="grid md:grid-cols-3 gap-8 mt-12 text-left">
          <!-- Card 1: Business Information -->
          <div class="bg-white dark:bg-slate-950 p-6 rounded-xl border border-slate-200 dark:border-slate-800 space-y-4">
            <div class="flex items-center gap-4">
              <div class="w-12 h-12 rounded-full bg-brand-600/10 dark:bg-brand-400/10 flex-shrink-0 flex items-center justify-center text-brand-600 dark:text-brand-400">
                <i data-lucide="briefcase" class="w-6 h-6"></i>
              </div>
              <h3 class="text-xl font-ubuntu font-bold">Business Information</h3>
            </div>
            <ul class="list-disc pl-5 space-y-2 text-sm text-slate-600 dark:text-slate-400">
              <li>Business information (name, address, industry)</li>
              <li>Owner/representative info (name, contact, ID)</li>
              <li>Bank account for payouts</li>
              <li>Verification documents (e.g. photo ID, business registration)—upload when prompted</li>
            </ul>
          </div>
          <!-- Card 2: Security & Compliance -->
          <div class="bg-white dark:bg-slate-950 p-6 rounded-xl border border-slate-200 dark:border-slate-800 space-y-4">
            <div class="flex items-center gap-4">
              <div class="w-12 h-12 rounded-full bg-brand-600/10 dark:bg-brand-400/10 flex-shrink-0 flex items-center justify-center text-brand-600 dark:text-brand-400">
                <i data-lucide="shield-check" class="w-6 h-6"></i>
              </div>
              <h3 class="text-xl font-ubuntu font-bold">Security & Compliance</h3>
            </div>
            <ul class="list-disc pl-5 space-y-2 text-sm text-slate-600 dark:text-slate-400">
              <li>Basic fraud and security setup (required for processing)</li>
              <li>Evidence of PCI DSS certification or self-assessment</li>
              <li>Use of PCI-compliant POS systems or software</li>
              <li>Merchant attestation of cardholder data handling policies</li>
            </ul>
          </div>
          <!-- Card 3: Platform Readiness -->
          <div class="bg-white dark:bg-slate-950 p-6 rounded-xl border border-slate-200 dark:border-slate-800 space-y-4">
            <div class="flex items-center gap-4">
              <div class="w-12 h-12 rounded-full bg-brand-600/10 dark:bg-brand-400/10 flex-shrink-0 flex items-center justify-center text-brand-600 dark:text-brand-400">
                <i data-lucide="rocket" class="w-6 h-6"></i>
              </div>
              <h3 class="text-xl font-ubuntu font-bold">Platform Readiness</h3>
            </div>
            <ul class="list-disc pl-5 space-y-2 text-sm text-slate-600 dark:text-slate-400">
              <li>User account creation and login testing</li>
              <li>Review of available transaction and reconciliation tools</li>
              <li>Setup of reporting email or dashboard notifications</li>
            </ul>
          </div>
        </div>
      </div>
    </section>
    <div class="absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 z-10 w-full max-w-5xl px-4">
        <div class="bg-brand-green px-8 py-4 rounded-xl shadow-lg text-center">
            <h2 class="text-3xl font-ubuntu font-bold" style="color: #524848;">Setup Checklist: What You’ll Need to Begin</h2>
        </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="border-t border-slate-200 dark:border-slate-800 py-10">
    <div class="max-w-7xl mx-auto px-4 grid sm:grid-cols-2 lg:grid-cols-4 gap-8 text-sm">
      <div class="space-y-3">
        <a href="#" class="flex items-center gap-3">
            <img src="shield/shield.png" alt="MerchantHaus Logo" class="h-9 w-9">
            <span class="text-2xl font-ubuntu font-bold tracking-wide grad-text">MerchantHaus</span>
        </a>
        <p>Payments made simple.</p>
        <div class="text-sm">
            <a href="tel:15056006042" class="block">1-505-600-6042</a>
            <a href="mailto:support@merchanthaus.io" class="block">support@merchanthaus.io</a>
        </div>
      </div>
      <nav class="space-y-2">
        <h3 class="font-semibold font-ubuntu">Product</h3>
        <a href="#payments" class="block">Payment Services</a>
        <a href="#integrations" class="block">Integrations</a>
        <a href="#checklist" class="block">Setup Checklist</a>
        <a href="compliance.html" class="block">Compliance</a>
      </nav>
      <nav class="space-y-2">
        <h3 class="font-semibold font-ubuntu">Support</h3>
        <a href="#" class="js-support block">Contact Support</a>
        <a href="#faq-question" class="block">FAQs</a>
      </nav>
      <nav class="space-y-2">
        <h3 class="font-semibold font-ubuntu">Legal</h3>
        <a href="Privacy_policy.html" class="block">Privacy Policy</a>
        <a href="terms.html" class="block">Terms & Conditions</a>
      </nav>
    </div>
    <div class="text-center text-xs pt-8 mt-8 border-t">© <span id="year"></span> Merchant Haus. All rights reserved.</div>
  </footer>

  <!-- Slide-in Sign-up Form -->
  <div id="signup-panel-overlay" class="panel-overlay fixed inset-0 bg-black/60 z-50 opacity-0 invisible">
    <div id="signup-panel" class="panel-container fixed top-0 right-0 h-full w-full max-w-2xl bg-white dark:bg-slate-900 shadow-2xl transform translate-x-full flex flex-col">
        <div class="p-6 sm:p-8 relative flex-shrink-0">
            <button id="close-signup-panel-btn" class="absolute top-4 right-4 text-slate-500 hover:text-slate-800 dark:hover:text-slate-200"><i data-lucide="x" class="h-6 w-6"></i></button>
            <div class="mb-6">
                <div class="flex justify-between mb-2 text-sm font-semibold text-slate-800 dark:text-slate-200">
                    <p>Step <span id="current-step-text">1</span> of 3</p>
                    <p id="step-name">Account Details</p>
                </div>
                <div class="w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2.5 overflow-hidden">
                    <div id="progress-bar" class="bg-brand-600 h-full rounded-full" style="width: 33%"></div>
                </div>
            </div>
        </div>
        <div class="px-6 sm:px-8 pb-4 flex-grow overflow-y-auto">
            <form id="signup-form" novalidate></form>
            <div id="form-message" class="mt-4 text-center text-sm"></div>
        </div>
        <div class="p-6 sm:p-8 mt-auto pt-6 border-t border-slate-200 dark:border-slate-800 flex justify-between items-center flex-shrink-0">
            <div class="text-sm">
                <p class="font-semibold">Need Help?</p>
                <a href="tel:15056006042" class="text-slate-500 hover:text-brand-600 dark:hover:text-brand-400 transition-colors">1-505-600-6042</a>
            </div>
            <div class="flex items-center gap-4">
                <button type="button" id="prev-btn" class="bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 px-6 py-2.5 rounded-lg font-semibold hover:bg-slate-300 dark:hover:bg-slate-600 transition-all invisible">Previous</button>
                <button type="button" id="next-btn" class="bg-brand-600 text-white px-6 py-2.5 rounded-lg font-semibold hover:bg-brand-700 transition-all shadow-sm hover:shadow-md">Next</button>
                <button type="submit" id="submit-btn" form="signup-form" class="bg-brand-600 text-white px-6 py-2.5 rounded-lg font-bold hover:bg-brand-700 transition-all shadow-sm hover:shadow-md hidden">Create Account</button>
            </div>
        </div>
    </div>
  </div>

  <!-- Support Modal -->
  <div id="support-modal" class="fixed inset-0 z-[70] hidden">
    <div class="absolute inset-0 bg-black/60" data-close></div>
    <div class="mx-auto mt-[10vh] w-[min(560px,92vw)] rounded-2xl bg-white dark:bg-slate-900 p-6 border border-slate-200 dark:border-slate-800 shadow-2xl">
      <div class="flex items-center justify-between">
        <h3 class="text-xl font-extrabold font-ubuntu">Contact Support</h3>
        <button class="p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800" data-close aria-label="Close">
          <i data-lucide="x" class="h-5 w-5"></i>
        </button>
      </div>
      <p class="mt-1 text-sm text-slate-600 dark:text-slate-300">Have a question? Fill out the form below or contact us at <a href="tel:15056006042" class="text-brand-600 dark:text-brand-400 hover:underline">1-505-600-6042</a>.</p>
      <form id="support-form" class="mt-4 grid gap-3">
        <input name="name" placeholder="Your name" class="field rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-950 px-3 py-2" required>
        <input name="email" type="email" placeholder="Work email" class="field rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-950 px-3 py-2" required>
        <textarea name="message" placeholder="Your message..." rows="4" class="field rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-950 px-3 py-2" required></textarea>
        <button class="rounded-lg bg-brand-600 text-white font-semibold px-4 py-2 hover:bg-brand-700" type="submit">Send Message</button>
        <p id="support-out" class="text-xs text-slate-500"></p>
      </form>
    </div>
  </div>


  <!-- Scripts -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {  
        if (window.lucide) lucide.createIcons();  
        
        const services = [
            { icon: "smartphone", title: "Accept Payments Anywhere", description: "Online, in‑store, or on the go." },
            { icon: "git-pull-request-arrow", title: "Smart Processing & Routing", description: "Reduce costs and minimize fraud." },
            { icon: "link", title: "Payment Links & Invoicing", description: "Send secure pay‑by‑link options." },
            { icon: "repeat", title: "Recurring Billing", description: "Automated plans and reminders." },
            { icon: "lock", title: "Secure Tokenization", description: "Protect customer info safely." },
            { icon: "bar-chart-2", title: "Detailed Reporting", description: "Track settlements and insights." },
            { icon: "settings-2", title: "Integration & Automation", description: "APIs and webhooks to connect systems." },
            { icon: "banknote", title: "Bank Payments & ACH", description: "Lower-cost direct transfers." }
        ];
        const container1 = document.getElementById('services-container-1');
        const container2 = document.getElementById('services-container-2');
        if(container1 && container2) {
            const renderServices = (container) => {
                services.forEach(service => {
                    const serviceEl = document.createElement('div');
                    serviceEl.className = 'service-cell p-4 w-auto flex-shrink-0 flex items-center gap-4';
                    serviceEl.innerHTML = `
                        <i data-lucide="${service.icon}" class="w-8 h-8 text-brand-600"></i>
                        <div class="text-left">
                            <h3 class="font-bold text-lg font-ubuntu" style="color: #524848;">${service.title}</h3>
                            <p class="text-base" style="color: #524848;">${service.description}</p>
                        </div>
                    `;
                    container.appendChild(serviceEl);
                });
            }
            renderServices(container1);
            renderServices(container2);
            if (window.lucide) {
                lucide.createIcons();
            }
        }
    
        document.getElementById('year').textContent = new Date().getFullYear();
        
        // Pop-out Menu Logic
        const menuBtn = document.getElementById('open-menu-btn');
        const popoutMenu = document.getElementById('popout-menu');

        if (menuBtn && popoutMenu) {
            menuBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                const isHidden = popoutMenu.classList.contains('hidden');
                if (isHidden) {
                    popoutMenu.classList.remove('hidden');
                    setTimeout(() => {
                        popoutMenu.classList.remove('opacity-0');
                    }, 10);
                } else {
                    popoutMenu.classList.add('opacity-0');
                    setTimeout(() => {
                        popoutMenu.classList.add('hidden');
                    }, 300);
                }
            });

            document.addEventListener('click', (e) => {
                if (!popoutMenu.classList.contains('hidden') && !popoutMenu.contains(e.target) && !menuBtn.contains(e.target)) {
                    popoutMenu.classList.add('opacity-0');
                    setTimeout(() => {
                        popoutMenu.classList.add('hidden');
                    }, 300);
                }
            });

            popoutMenu.querySelectorAll('a[data-close]').forEach(link => {
                link.addEventListener('click', () => {
                    popoutMenu.classList.add('opacity-0');
                    setTimeout(() => {
                        popoutMenu.classList.add('hidden');
                    }, 300);
                });
            });
        }

        const openPanel = (overlayId, panelId) => {
            document.getElementById(overlayId).classList.remove('invisible', 'opacity-0');
            document.getElementById(panelId).classList.remove('translate-x-full');
        };
        const closePanel = (overlayId, panelId) => {
            document.getElementById(panelId).classList.add('translate-x-full');
            setTimeout(() => {
                document.getElementById(overlayId).classList.add('invisible', 'opacity-0');
            }, 300);
        };

        // Signup Panel Logic
        const signupOverlay = document.getElementById('signup-panel-overlay');
        const signupPanel = document.getElementById('signup-panel');
        const closeSignupBtn = document.getElementById('close-signup-panel-btn');

        document.querySelectorAll('.js-cta').forEach(el => {
            el.addEventListener('click', (e) => {
                e.preventDefault();
                openPanel('signup-panel-overlay', 'signup-panel');
                initializeForm();
            });
        });

        if (closeSignupBtn) {
            closeSignupBtn.addEventListener('click', () => closePanel('signup-panel-overlay', 'signup-panel'));
        }
        if (signupOverlay) {
            signupOverlay.addEventListener('click', (e) => {
                if (e.target.id === 'signup-panel-overlay') {
                    closePanel('signup-panel-overlay', 'signup-panel');
                }
            });
        }


        const supportModal = document.getElementById('support-modal');
        document.querySelectorAll('.js-support').forEach(el => {
          el.addEventListener('click', (e) => { e.preventDefault(); supportModal.classList.remove('hidden'); });
        });
        supportModal.addEventListener('click', (e) => {
          if (e.target.dataset.close !== undefined) supportModal.classList.add('hidden');
        });
        

        const animatedTagline = document.getElementById('animated-tagline');
        const taglineText = "safe . smart . secure";

        function typeWriter(element, text, speed, callback) {
            let i = 0;  
            if (!element) return;
            element.innerHTML = '';
            const typingInterval = setInterval(() => {
                if (i < text.length) {
                    element.innerHTML = text.substring(0, i + 1) + '<span class="cursor"></span>'; i++;
                } else {
                    clearInterval(typingInterval);  
                    element.innerHTML = text;
                    if (callback) callback();
                }
            }, speed);
        }
        
        setTimeout(() => {  
            typeWriter(animatedTagline, taglineText, 100);
        }, 500);

        const headingTexts = {
            "integrations": "Integrate with Your Favorite Tools",
        };

        const headingObserver = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const heading = entry.target;
                    const sectionId = heading.closest('section').id;
                    const text = headingTexts[sectionId];
                    if (text && !heading.dataset.animated) {
                        heading.dataset.animated = 'true';
                        typeWriter(heading, text, 75);
                        observer.unobserve(heading);
                    }
                }
            });
        }, { threshold: 0.8 });

        document.querySelectorAll('.animate-on-scroll').forEach(el => {
            headingObserver.observe(el);
        });

        const cellObserver = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('is-visible');
                    observer.unobserve(entry.target);
                }
            });
        }, {  
            root: null,
            threshold: 0.5
        });

        document.querySelectorAll('.service-cell').forEach(cell => {
            cellObserver.observe(cell);
        });

        const askFaqBtn = document.getElementById('ask-faq');
        const faqQuestionInput = document.getElementById('faq-question');
        const faqAnswerContainer = document.getElementById('faq-answer');
        const getPageContext = () => {
            let context = "Page Content:\n\n";
            document.querySelectorAll('h1, h2, h3, p, li').forEach(el => { context += el.textContent.trim() + "\n"; });
            return context;
        };
        const handleFaqSubmit = async () => {
            const question = faqQuestionInput.value.trim();
            if (!question) return;
            faqAnswerContainer.classList.remove('hidden');
            askFaqBtn.disabled = true;
            askFaqBtn.innerHTML = '<span class="loader"></span>';
            faqAnswerContainer.innerHTML = 'Thinking...';
            const pageContext = getPageContext();
            const prompt = `You are a helpful assistant for MerchantHaus, a payment processing company. A user has a question: "${question}". Based *only* on the following context from the MerchantHaus website, provide a clear and concise answer. If the answer is not in the context, say "I'm sorry, I can't find information about that on this page. Please contact support for more details."\n\nContext:\n${pageContext}`;
            try {
                const payload = { contents: [{ role: "user", parts: [{ text: prompt }] }] };
                const apiKey = "";
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
                const response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                if (!response.ok) throw new Error(`API request failed with status ${response.status}`);
                const result = await response.json();
                if (result.candidates?.[0]?.content?.parts?.[0]?.text) {
                    const text = result.candidates[0].content.parts[0].text;
                    let html = text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>').replace(/^\* (.*$)/gm, '<li>$1</li>').replace(/<\/li><li>/g, '</li><li>');
                    if (html.includes('<li>')) html = `<ul class="list-disc pl-5 space-y-2">${html}</ul>`;
                    faqAnswerContainer.innerHTML = html;
                } else {
                    faqAnswerContainer.textContent = 'Sorry, I could not find an answer to your question.';
                }
            } catch (error) {
                console.error('Error fetching AI response:', error);
                faqAnswerContainer.textContent = 'Sorry, something went wrong. Please try again later.';
            } finally {
                askFaqBtn.disabled = false;
                askFaqBtn.innerHTML = '<i data-lucide="arrow-up" class="h-5 w-5"></i>';
                if(window.lucide) lucide.createIcons();
            }
        };
        askFaqBtn.addEventListener('click', handleFaqSubmit);
        faqQuestionInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') handleFaqSubmit(); });

        // Multi-step form logic
        let currentStep = 0;
        const stepNames = ["Account Details", "Company Information", "Finalize Account"];

        function initializeForm() {
            const form = document.getElementById('signup-form');
            if (!form) return;
            form.innerHTML = `
                <!-- Step 1: Account Details -->
                <div id="step-1" class="form-step">
                    <h2 class="text-2xl font-bold mb-2">Primary Contact Information</h2>
                    <p class="text-sm text-slate-500 mb-6">This person will be the primary user on the account.</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="firstName" class="block text-sm font-semibold mb-1">First Name*</label>
                            <input type="text" id="firstName" name="firstName" class="w-full p-3 rounded-lg bg-slate-100 dark:bg-slate-800" required>
                        </div>
                        <div>
                            <label for="lastName" class="block text-sm font-semibold mb-1">Last Name*</label>
                            <input type="text" id="lastName" name="lastName" class="w-full p-3 rounded-lg bg-slate-100 dark:bg-slate-800" required>
                        </div>
                        <div class="md:col-span-2">
                            <label for="email" class="block text-sm font-semibold mb-1">Email Address*</label>
                            <input type="email" id="email" name="email" class="w-full p-3 rounded-lg bg-slate-100 dark:bg-slate-800" required>
                        </div>
                        <div>
                            <label for="phone" class="block text-sm font-semibold mb-1">Phone Number*</label>
                            <input type="tel" id="phone" name="phone" class="w-full p-3 rounded-lg bg-slate-100 dark:bg-slate-800" required>
                        </div>
                        <div>
                            <label for="password" class="block text-sm font-semibold mb-1">Password*</label>
                            <input type="password" id="password" name="password" class="w-full p-3 rounded-lg bg-slate-100 dark:bg-slate-800" required>
                        </div>
                    </div>
                </div>
                <!-- Step 2: Business Information -->
                <div id="step-2" class="form-step hidden">
                    <h2 class="text-2xl font-bold mb-6">Company Information</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="md:col-span-2">
                            <label for="companyName" class="block text-sm font-semibold mb-1">Company Name*</label>
                            <input type="text" id="companyName" name="companyName" class="w-full p-3 rounded-lg bg-slate-100 dark:bg-slate-800" required>
                        </div>
                    </div>
                </div>
                <!-- Step 3: Final Details -->
                <div id="step-3" class="form-step hidden">
                    <h2 class="text-2xl font-bold mb-2">Finalize Your Account</h2>
                    <p class="text-sm text-slate-500 mb-6">Create a username for logging into the gateway and accept the terms.</p>
                    <div class="space-y-4">
                        <div>
                            <label for="username" class="block text-sm font-semibold mb-1">Primary Username*</label>
                            <input type="text" id="username" name="username" class="w-full p-3 rounded-lg bg-slate-100 dark:bg-slate-800" required>
                        </div>
                        <div class="flex items-start pt-4">
                            <div class="flex items-center h-5">
                                <input id="terms" name="terms" type="checkbox" class="focus:ring-brand-600 h-4 w-4 text-brand-600 rounded" required>
                            </div>
                            <div class="ml-3 text-sm">
                                <label for="terms">I agree to the <a href="#" class="font-semibold text-brand-600 hover:underline">Terms and Conditions</a>*</label>
                            </div>
                        </div>
                    </div>
                </div>`;
            
            const steps = form.querySelectorAll('.form-step');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const submitBtn = document.getElementById('submit-btn');
            const progressBar = document.getElementById('progress-bar');
            const currentStepText = document.getElementById('current-step-text');
            const stepNameEl = document.getElementById('step-name');

            function updateFormStep() {
                steps.forEach((step, index) => {
                    step.classList.toggle('hidden', index !== currentStep);
                });
                progressBar.style.width = `${((currentStep + 1) / steps.length) * 100}%`;
                currentStepText.textContent = currentStep + 1;
                stepNameEl.textContent = stepNames[currentStep];
                prevBtn.classList.toggle('invisible', currentStep === 0);
                nextBtn.classList.toggle('hidden', currentStep === steps.length - 1);
                submitBtn.classList.toggle('hidden', currentStep !== steps.length - 1);
            }

            nextBtn.addEventListener('click', () => {
                if (currentStep < steps.length - 1) {
                    currentStep++;
                    updateFormStep();
                }
            });
            prevBtn.addEventListener('click', () => {
                if (currentStep > 0) {
                    currentStep--;
                    updateFormStep();
                }
            });

            updateFormStep();
        }
    });
  </script>
</body>
</html>